<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basic REDCapR Operations • REDCapR</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Basic REDCapR Operations">
<meta property="og:description" content="">
<meta property="og:image" content="https://ouhscbbmc.github.io/REDCapR/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">REDCapR</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.9.10.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/BasicREDCapROperations.html">Basic REDCapR Operations</a>
    </li>
    <li>
      <a href="../articles/SecurityDatabase.html">Security Database</a>
    </li>
    <li>
      <a href="../articles/TroubleshootingApiCalls.html">Troubleshooting REDCap API Calls</a>
    </li>
    <li>
      <a href="../articles/advanced-redcapr-operations.html">Advanced REDCapR Operations</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/OuhscBbmc/REDCapR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Basic REDCapR Operations</h1>
            
            <h4 class="date">2018-07-11</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/OuhscBbmc/REDCapR/blob/master/vignettes/BasicREDCapROperations.Rmd"><code>vignettes/BasicREDCapROperations.Rmd</code></a></small>
      <div class="hidden name"><code>BasicREDCapROperations.Rmd</code></div>

    </div>

    
    
<p>This vignette covers the the basic functions exposed by the <a href="https://github.com/hadley/httr"><code>httr</code></a> and <a href="https://cran.r-project.org/package=curl"><code>curl</code></a> packages which allow you to interact with <a href="http://www.project-redcap.org/">REDCap</a> through its API.</p>
<div id="reading-redcap-data" class="section level2">
<h2 class="hasAnchor">
<a href="#reading-redcap-data" class="anchor"></a>Reading REDCap Data</h2>
<p>The function <code>redcap_read_oneshot</code> uses the <a href="https://cran.r-project.org/package=httr"><code>httr</code></a> package to call the REDCap API.</p>
<pre><code>## Loading required namespace: kableExtra</code></pre>
<div id="set-project-wide-values-" class="section level3">
<h3 class="hasAnchor">
<a href="#set-project-wide-values-" class="anchor"></a>Set project-wide values.</h3>
<p>There is some information that is specific to the REDCap project, as opposed to an individual operation. This includes the (1) uri of the server, and the (2) token for the user’s project.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(REDCapR) <span class="co">#Load the package into the current R session.</span>
uri &lt;-<span class="st"> "https://bbmc.ouhsc.edu/redcap/api/"</span>
token &lt;-<span class="st"> "9A81268476645C4E5F03428B8AC3AA7B"</span> <span class="co">#`UnitTestPhiFree` user and simple project (pid 153)</span></code></pre></div>
</div>
<div id="read-all-records-and-fields-" class="section level3">
<h3 class="hasAnchor">
<a href="#read-all-records-and-fields-" class="anchor"></a>Read all records and fields.</h3>
<p>If no information is passed about the desired records or fields, then the entire data set is returned. Only two parameters are required, <code>redcap_uri</code> and <code>token</code>. Unless the <code>verbose</code> parameter is set to <code>FALSE</code>, a message will be printed on the R console with the number of records and fields returned.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Return all records and all variables.</span>
ds_all_rows_all_fields &lt;-<span class="st"> </span><span class="kw"><a href="../reference/redcap_read.html">redcap_read</a></span>(<span class="dt">redcap_uri=</span>uri, <span class="dt">token=</span>token)<span class="op">$</span>data</code></pre></div>
<pre><code>The data dictionary describing 16 fields was read from REDCap in 0.5 seconds.  The http status code was 200.</code></pre>
<pre><code>5 records and 1 columns were read from REDCap in 0.7 seconds.  The http status code was 200.</code></pre>
<pre><code>Starting to read 5 records  at 2018-07-11 22:44:38.</code></pre>
<pre><code>Reading batch 1 of 1, with subjects 1 through 5 (ie, 5 unique subject records).</code></pre>
<pre><code>5 records and 24 columns were read from REDCap in 0.3 seconds.  The http status code was 200.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ds_all_rows_all_fields <span class="co">#Inspect the returned dataset</span></code></pre></div>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
record id
</th>
<th style="text-align:left;">
name first
</th>
<th style="text-align:left;">
name last
</th>
<th style="text-align:left;">
address
</th>
<th style="text-align:left;">
telephone
</th>
<th style="text-align:left;">
email
</th>
<th style="text-align:left;">
dob
</th>
<th style="text-align:right;">
age
</th>
<th style="text-align:right;">
sex
</th>
<th style="text-align:right;">
demographics complete
</th>
<th style="text-align:right;">
height
</th>
<th style="text-align:right;">
weight
</th>
<th style="text-align:right;">
bmi
</th>
<th style="text-align:left;">
comments
</th>
<th style="text-align:left;">
mugshot
</th>
<th style="text-align:right;">
health complete
</th>
<th style="text-align:right;">
race 1
</th>
<th style="text-align:right;">
race 2
</th>
<th style="text-align:right;">
race 3
</th>
<th style="text-align:right;">
race 4
</th>
<th style="text-align:right;">
race 5
</th>
<th style="text-align:right;">
race 6
</th>
<th style="text-align:right;">
ethnicity
</th>
<th style="text-align:right;">
race and ethnicity complete
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Nutmeg
</td>
<td style="text-align:left;">
Nutmouse
</td>
<td style="text-align:left;">
14 Rose Cottage St. Kenning UK, 323232
</td>
<td style="text-align:left;">
<ol start="405" style="list-style-type: decimal"><li>321-1111
</li></ol>
</td>
<td style="text-align:left;">
<a href="mailto:nutty@mouse.com">nutty@mouse.com</a>
</td>
<td style="text-align:left;">
2003-08-30
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
7.00
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
204.1
</td>
<td style="text-align:left;">
Character in a book, with some guessing
</td>
<td style="text-align:left;">
[document]
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Tumtum
</td>
<td style="text-align:left;">
Nutmouse
</td>
<td style="text-align:left;">
14 Rose Cottage Blvd. Kenning UK 34243
</td>
<td style="text-align:left;">
<ol start="405" style="list-style-type: decimal"><li>321-2222
</li></ol>
</td>
<td style="text-align:left;">
<a href="mailto:tummy@mouse.comm">tummy@mouse.comm</a>
</td>
<td style="text-align:left;">
2003-03-10
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
6.00
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
277.8
</td>
<td style="text-align:left;">
A mouse character from a good book
</td>
<td style="text-align:left;">
[document]
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Marcus
</td>
<td style="text-align:left;">
Wood
</td>
<td style="text-align:left;">
243 Hill St. Guthrie OK 73402
</td>
<td style="text-align:left;">
<ol start="405" style="list-style-type: decimal"><li>321-3333
</li></ol>
</td>
<td style="text-align:left;">
<a href="mailto:mw@mwood.net">mw@mwood.net</a>
</td>
<td style="text-align:left;">
1934-04-09
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
180.00
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
24.7
</td>
<td style="text-align:left;">
completely made up
</td>
<td style="text-align:left;">
[document]
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Trudy
</td>
<td style="text-align:left;">
DAG
</td>
<td style="text-align:left;">
342 Elm Duncanville TX, 75116
</td>
<td style="text-align:left;">
<ol start="405" style="list-style-type: decimal"><li>321-4444
</li></ol>
</td>
<td style="text-align:left;">
<a href="mailto:peroxide@blonde.com">peroxide@blonde.com</a>
</td>
<td style="text-align:left;">
1952-11-02
</td>
<td style="text-align:right;">
61
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
165.00
</td>
<td style="text-align:right;">
54
</td>
<td style="text-align:right;">
19.8
</td>
<td style="text-align:left;">
This record doesn’t have a DAG assigned




So call up Trudy on the telephone Send her a letter in the mail
</td>
<td style="text-align:left;">
[document]
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
John Lee
</td>
<td style="text-align:left;">
Walker
</td>
<td style="text-align:left;">
Hotel Suite New Orleans LA, 70115
</td>
<td style="text-align:left;">
<ol start="405" style="list-style-type: decimal"><li>321-5555
</li></ol>
</td>
<td style="text-align:left;">
<a href="mailto:left@hippocket.com">left@hippocket.com</a>
</td>
<td style="text-align:left;">
1955-04-15
</td>
<td style="text-align:right;">
59
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
193.04
</td>
<td style="text-align:right;">
104
</td>
<td style="text-align:right;">
27.9
</td>
<td style="text-align:left;">
Had a hand for trouble and a eye for cash

He had a gold watch chain and a black mustache
</td>
<td style="text-align:left;">
[document]
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
</div>
<div id="read-a-subset-of-the-records-" class="section level3">
<h3 class="hasAnchor">
<a href="#read-a-subset-of-the-records-" class="anchor"></a>Read a subset of the records.</h3>
<p>If only a subset of the <strong>records</strong> is desired, the two approaches are shown below. The first is to pass an array (where each element is an ID) to the <code>records</code> parameter. The second is to pass a single string (where the elements are separated by commas) to the <code>records_collapsed</code> parameter.</p>
<p>The first format is more natural for more R users. The second format is what is expected by the REDCap API. If a value for <code>records</code> is specified, but <code>records_collapsed</code> is not specified, then <code>redcap_read_oneshot</code> automatically converts the array into the format needed by the API.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Return only records with IDs of 1 and 3</span>
desired_records_v1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)
ds_some_rows_v1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/redcap_read.html">redcap_read</a></span>(
   <span class="dt">redcap_uri =</span> uri, 
   <span class="dt">token      =</span> token, 
   <span class="dt">records    =</span> desired_records_v1
)<span class="op">$</span>data</code></pre></div>
<pre><code>The data dictionary describing 16 fields was read from REDCap in 0.3 seconds.  The http status code was 200.</code></pre>
<pre><code>2 records and 1 columns were read from REDCap in 0.3 seconds.  The http status code was 200.</code></pre>
<pre><code>Starting to read 2 records  at 2018-07-11 22:44:39.</code></pre>
<pre><code>Reading batch 1 of 1, with subjects 1 through 3 (ie, 2 unique subject records).</code></pre>
<pre><code>2 records and 24 columns were read from REDCap in 0.2 seconds.  The http status code was 200.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Return only records with IDs of 1 and 3 (alternate way)</span>
desired_records_v2 &lt;-<span class="st"> "1, 3"</span>
ds_some_rows_v2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/redcap_read.html">redcap_read</a></span>(
   <span class="dt">redcap_uri        =</span> uri, 
   <span class="dt">token             =</span> token, 
   <span class="dt">records_collapsed =</span> desired_records_v2
)<span class="op">$</span>data</code></pre></div>
<pre><code>The data dictionary describing 16 fields was read from REDCap in 0.3 seconds.  The http status code was 200.</code></pre>
<pre><code>2 records and 1 columns were read from REDCap in 0.3 seconds.  The http status code was 200.</code></pre>
<pre><code>Starting to read 2 records  at 2018-07-11 22:44:41.</code></pre>
<pre><code>Reading batch 1 of 1, with subjects 1 through 3 (ie, 2 unique subject records).</code></pre>
<pre><code>2 records and 24 columns were read from REDCap in 0.3 seconds.  The http status code was 200.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ds_some_rows_v2 <span class="co">#Inspect the returned dataset</span></code></pre></div>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
record id
</th>
<th style="text-align:left;">
name first
</th>
<th style="text-align:left;">
name last
</th>
<th style="text-align:left;">
address
</th>
<th style="text-align:left;">
telephone
</th>
<th style="text-align:left;">
email
</th>
<th style="text-align:left;">
dob
</th>
<th style="text-align:right;">
age
</th>
<th style="text-align:right;">
sex
</th>
<th style="text-align:right;">
demographics complete
</th>
<th style="text-align:right;">
height
</th>
<th style="text-align:right;">
weight
</th>
<th style="text-align:right;">
bmi
</th>
<th style="text-align:left;">
comments
</th>
<th style="text-align:left;">
mugshot
</th>
<th style="text-align:right;">
health complete
</th>
<th style="text-align:right;">
race 1
</th>
<th style="text-align:right;">
race 2
</th>
<th style="text-align:right;">
race 3
</th>
<th style="text-align:right;">
race 4
</th>
<th style="text-align:right;">
race 5
</th>
<th style="text-align:right;">
race 6
</th>
<th style="text-align:right;">
ethnicity
</th>
<th style="text-align:right;">
race and ethnicity complete
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Nutmeg
</td>
<td style="text-align:left;">
Nutmouse
</td>
<td style="text-align:left;">
14 Rose Cottage St. Kenning UK, 323232
</td>
<td style="text-align:left;">
<ol start="405" style="list-style-type: decimal"><li>321-1111
</li></ol>
</td>
<td style="text-align:left;">
<a href="mailto:nutty@mouse.com">nutty@mouse.com</a>
</td>
<td style="text-align:left;">
2003-08-30
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
204.1
</td>
<td style="text-align:left;">
Character in a book, with some guessing
</td>
<td style="text-align:left;">
[document]
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Marcus
</td>
<td style="text-align:left;">
Wood
</td>
<td style="text-align:left;">
243 Hill St. Guthrie OK 73402
</td>
<td style="text-align:left;">
<ol start="405" style="list-style-type: decimal"><li>321-3333
</li></ol>
</td>
<td style="text-align:left;">
<a href="mailto:mw@mwood.net">mw@mwood.net</a>
</td>
<td style="text-align:left;">
1934-04-09
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
180
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
24.7
</td>
<td style="text-align:left;">
completely made up
</td>
<td style="text-align:left;">
[document]
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
</div>
<div id="read-a-subset-of-the-fields-" class="section level3">
<h3 class="hasAnchor">
<a href="#read-a-subset-of-the-fields-" class="anchor"></a>Read a subset of the fields.</h3>
<p>If only a subset of the <strong>fields</strong> is desired, then two approaches exist. The first is to pass an array (where each element is an field) to the <code>fields</code> parameter. The second is to pass a single string (where the elements are separated by commas) to the <code>fields_collapsed</code> parameter. Like with <code>records</code> and <code>records_collapsed</code> described above, this function converts the more natural format (<em>ie</em>, <code>fields</code>) to the format required by the API (<em>ie</em>, <code>fields_collapsed</code>) if <code>fields</code> is specified and <code>fields_collapsed</code> is not.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Return only the fields record_id, name_first, and age</span>
desired_fields_v1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"record_id"</span>, <span class="st">"name_first"</span>, <span class="st">"age"</span>)
ds_some_fields_v1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/redcap_read.html">redcap_read</a></span>(
   <span class="dt">redcap_uri =</span> uri, 
   <span class="dt">token      =</span> token, 
   <span class="dt">fields     =</span> desired_fields_v1
)<span class="op">$</span>data</code></pre></div>
<pre><code>The data dictionary describing 16 fields was read from REDCap in 0.2 seconds.  The http status code was 200.</code></pre>
<pre><code>5 records and 1 columns were read from REDCap in 0.3 seconds.  The http status code was 200.</code></pre>
<pre><code>Starting to read 5 records  at 2018-07-11 22:44:42.</code></pre>
<pre><code>Reading batch 1 of 1, with subjects 1 through 5 (ie, 5 unique subject records).</code></pre>
<pre><code>5 records and 3 columns were read from REDCap in 1.1 seconds.  The http status code was 200.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Return only the fields record_id, name_first, and age (alternate way)</span>
desired_fields_v2 &lt;-<span class="st"> "record_id, name_first, age"</span>
ds_some_fields_v2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/redcap_read.html">redcap_read</a></span>(
   <span class="dt">redcap_uri       =</span> uri, 
   <span class="dt">token            =</span> token, 
   <span class="dt">fields_collapsed =</span> desired_fields_v2
)<span class="op">$</span>data</code></pre></div>
<pre><code>The data dictionary describing 16 fields was read from REDCap in 0.3 seconds.  The http status code was 200.</code></pre>
<pre><code>5 records and 1 columns were read from REDCap in 0.3 seconds.  The http status code was 200.</code></pre>
<pre><code>Starting to read 5 records  at 2018-07-11 22:44:44.</code></pre>
<pre><code>Reading batch 1 of 1, with subjects 1 through 5 (ie, 5 unique subject records).</code></pre>
<pre><code>5 records and 3 columns were read from REDCap in 0.3 seconds.  The http status code was 200.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ds_some_fields_v2 <span class="co">#Inspect the returned dataset</span></code></pre></div>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
record id
</th>
<th style="text-align:left;">
name first
</th>
<th style="text-align:right;">
age
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Nutmeg
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Tumtum
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Marcus
</td>
<td style="text-align:right;">
80
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Trudy
</td>
<td style="text-align:right;">
61
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
John Lee
</td>
<td style="text-align:right;">
59
</td>
</tr>
</tbody>
</table>
</div>
<div id="read-a-subset-of-records-conditioned-on-the-values-in-some-variables-" class="section level3">
<h3 class="hasAnchor">
<a href="#read-a-subset-of-records-conditioned-on-the-values-in-some-variables-" class="anchor"></a>Read a subset of records, conditioned on the values in some variables.</h3>
<p>The two techniques above can be combined when your datasets are large and you don’t want to pull records with certain values. Suppose you want to select subjects from the previous dataset <em>if</em> the were born before 1960 and their weight was over 70kg. Two calls to the server are required. The <strong>first call</strong> to REDCap pulls all the records, but for only three columns: <code>record_id</code>, <code>dob</code>, and <code>weight</code>. From this subset, identify the records that you want to pull all the data for; in this case, the desired <code>record_id</code> values are <code>3</code> &amp; <code>5</code>. The <strong>second call</strong> to REDCap pulls all the columns, but only for the identified records.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">######
## Step 1: First call to REDCap
desired_fields_v3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"record_id"</span>, <span class="st">"dob"</span>, <span class="st">"weight"</span>)
ds_some_fields_v3 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/redcap_read.html">redcap_read</a></span>(
   <span class="dt">redcap_uri =</span> uri, 
   <span class="dt">token      =</span> token, 
   <span class="dt">fields     =</span> desired_fields_v3
)<span class="op">$</span>data</code></pre></div>
<pre><code>The data dictionary describing 16 fields was read from REDCap in 0.3 seconds.  The http status code was 200.</code></pre>
<pre><code>5 records and 1 columns were read from REDCap in 0.3 seconds.  The http status code was 200.</code></pre>
<pre><code>Starting to read 5 records  at 2018-07-11 22:44:46.</code></pre>
<pre><code>Reading batch 1 of 1, with subjects 1 through 5 (ie, 5 unique subject records).</code></pre>
<pre><code>5 records and 3 columns were read from REDCap in 0.3 seconds.  The http status code was 200.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ds_some_fields_v3 <span class="co">#Examine the these three variables.</span></code></pre></div>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
record id
</th>
<th style="text-align:left;">
dob
</th>
<th style="text-align:right;">
weight
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2003-08-30
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
2003-03-10
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
1934-04-09
</td>
<td style="text-align:right;">
80
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
1952-11-02
</td>
<td style="text-align:right;">
54
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
1955-04-15
</td>
<td style="text-align:right;">
104
</td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">######
## Step 2: identify desired records, based on age &amp; weight
before_<span class="dv">1960</span> &lt;-<span class="st"> </span>(ds_some_fields_v3<span class="op">$</span>dob <span class="op">&lt;=</span><span class="st"> </span><span class="kw">as.Date</span>(<span class="st">"1960-01-01"</span>))
heavier_than_70_kg &lt;-<span class="st"> </span>(ds_some_fields_v3<span class="op">$</span>weight <span class="op">&gt;</span><span class="st"> </span><span class="dv">70</span>)
desired_records_v3 &lt;-<span class="st"> </span>ds_some_fields_v3[before_<span class="dv">1960</span> <span class="op">&amp;</span><span class="st"> </span>heavier_than_70_kg, ]<span class="op">$</span>record_id

desired_records_v3 <span class="co">#Peek at IDs of the identified records</span></code></pre></div>
<pre><code>[1] 3 5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">######
## Step 3: second call to REDCap
<span class="co">#Return only records that met the age &amp; weight criteria.</span>
ds_some_rows_v3 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/redcap_read.html">redcap_read</a></span>(
   <span class="dt">redcap_uri =</span> uri, 
   <span class="dt">token      =</span> token, 
   <span class="dt">records    =</span> desired_records_v3
)<span class="op">$</span>data</code></pre></div>
<pre><code>The data dictionary describing 16 fields was read from REDCap in 0.3 seconds.  The http status code was 200.</code></pre>
<pre><code>2 records and 1 columns were read from REDCap in 0.3 seconds.  The http status code was 200.</code></pre>
<pre><code>Starting to read 2 records  at 2018-07-11 22:44:47.</code></pre>
<pre><code>Reading batch 1 of 1, with subjects 3 through 5 (ie, 2 unique subject records).</code></pre>
<pre><code>2 records and 24 columns were read from REDCap in 0.3 seconds.  The http status code was 200.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ds_some_rows_v3 <span class="co">#Examine the results.</span></code></pre></div>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
record id
</th>
<th style="text-align:left;">
name first
</th>
<th style="text-align:left;">
name last
</th>
<th style="text-align:left;">
address
</th>
<th style="text-align:left;">
telephone
</th>
<th style="text-align:left;">
email
</th>
<th style="text-align:left;">
dob
</th>
<th style="text-align:right;">
age
</th>
<th style="text-align:right;">
sex
</th>
<th style="text-align:right;">
demographics complete
</th>
<th style="text-align:right;">
height
</th>
<th style="text-align:right;">
weight
</th>
<th style="text-align:right;">
bmi
</th>
<th style="text-align:left;">
comments
</th>
<th style="text-align:left;">
mugshot
</th>
<th style="text-align:right;">
health complete
</th>
<th style="text-align:right;">
race 1
</th>
<th style="text-align:right;">
race 2
</th>
<th style="text-align:right;">
race 3
</th>
<th style="text-align:right;">
race 4
</th>
<th style="text-align:right;">
race 5
</th>
<th style="text-align:right;">
race 6
</th>
<th style="text-align:right;">
ethnicity
</th>
<th style="text-align:right;">
race and ethnicity complete
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Marcus
</td>
<td style="text-align:left;">
Wood
</td>
<td style="text-align:left;">
243 Hill St. Guthrie OK 73402
</td>
<td style="text-align:left;">
<ol start="405" style="list-style-type: decimal"><li>321-3333
</li></ol>
</td>
<td style="text-align:left;">
<a href="mailto:mw@mwood.net">mw@mwood.net</a>
</td>
<td style="text-align:left;">
1934-04-09
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
180.00
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
24.7
</td>
<td style="text-align:left;">
completely made up
</td>
<td style="text-align:left;">
[document]
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
John Lee
</td>
<td style="text-align:left;">
Walker
</td>
<td style="text-align:left;">
Hotel Suite New Orleans LA, 70115
</td>
<td style="text-align:left;">
<ol start="405" style="list-style-type: decimal"><li>321-5555
</li></ol>
</td>
<td style="text-align:left;">
<a href="mailto:left@hippocket.com">left@hippocket.com</a>
</td>
<td style="text-align:left;">
1955-04-15
</td>
<td style="text-align:right;">
59
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
193.04
</td>
<td style="text-align:right;">
104
</td>
<td style="text-align:right;">
27.9
</td>
<td style="text-align:left;">
Had a hand for trouble and a eye for cash


He had a gold watch chain and a black mustache
</td>
<td style="text-align:left;">
[document]
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
</div>
<div id="additional-returned-information" class="section level3">
<h3 class="hasAnchor">
<a href="#additional-returned-information" class="anchor"></a>Additional Returned Information</h3>
<p>The examples above have shown only the resulting <code>data.frame</code>, by specifying <code>$data</code> at the end of the call. However, more is available to those wanting additional information, such as:</p>
<ol style="list-style-type: decimal">
<li>The <code>data</code> object has the <code>data.frame</code>, as in the previous examples.</li>
<li>The <code>success</code> boolean value indicates if <code>redcap_read_oneshot</code> believes the operation completed as intended.</li>
<li>The <code>status_codes</code> is a collection of <a href="http://en.wikipedia.org/wiki/List_of_HTTP_status_codes">http status codes</a>, separated by semicolons. There is one code for each batch attempted.</li>
<li>The <code>outcome_messages</code>: A collection of human readable strings indicating the operations’ semicolons. There is one code for each batch attempted. In an unsuccessful operation, it should contain diagnostic information.</li>
<li>The <code>records_collapsed</code> field passed to the API. This shows which record subsets, if any, were requested.</li>
<li>The <code>fields_collapsed</code> fields passed to the API. This shows which field subsets, if any, were requested.</li>
<li>The <code>elapsed_seconds</code> measures the duration of the call.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Return only the fields record_id, name_first, and age</span>
all_information &lt;-<span class="st"> </span><span class="kw"><a href="../reference/redcap_read.html">redcap_read</a></span>(
   <span class="dt">redcap_uri =</span> uri, 
   <span class="dt">token      =</span> token, 
   <span class="dt">fields     =</span> desired_fields_v1
)</code></pre></div>
<pre><code>The data dictionary describing 16 fields was read from REDCap in 0.3 seconds.  The http status code was 200.</code></pre>
<pre><code>5 records and 1 columns were read from REDCap in 0.3 seconds.  The http status code was 200.</code></pre>
<pre><code>Starting to read 5 records  at 2018-07-11 22:44:49.</code></pre>
<pre><code>Reading batch 1 of 1, with subjects 1 through 5 (ie, 5 unique subject records).</code></pre>
<pre><code>5 records and 3 columns were read from REDCap in 0.5 seconds.  The http status code was 200.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">all_information <span class="co">#Inspect the additional information</span></code></pre></div>
<pre><code>$data
  record_id name_first age
1         1     Nutmeg  11
2         2     Tumtum  11
3         3     Marcus  80
4         4      Trudy  61
5         5   John Lee  59

$success
[1] TRUE

$status_codes
[1] "200"

$outcome_messages
[1] "5 records and 3 columns were read from REDCap in 0.5 seconds.  The http status code was 200."

$records_collapsed
[1] ""

$fields_collapsed
[1] "record_id,name_first,age"

$forms_collapsed
[1] ""

$events_collapsed
[1] ""

$filter_logic
[1] ""

$elapsed_seconds
[1] 1.603175</code></pre>
</div>
</div>
<div id="session-information" class="section level2">
<h2 class="hasAnchor">
<a href="#session-information" class="anchor"></a>Session Information</h2>
<p>For the sake of documentation and reproducibility, the current report was rendered in the following environment. Click the line below to expand.</p>
<p><details><summary>Environment <span class="glyphicon glyphicon-plus-sign"></span></summary></details></p>
<pre><code>─ Session info ──────────────────────────────────────────────────────────
 setting  value                       
 version  R version 3.4.4 (2018-03-15)
 os       Ubuntu 18.04 LTS            
 system   x86_64, linux-gnu           
 ui       X11                         
 language (EN)                        
 collate  en_US.UTF-8                 
 tz       America/Chicago             
 date     2018-07-11                  

─ Packages ──────────────────────────────────────────────────────────────
 package     * version     date       source                          
 assertthat    0.2.0       2017-04-11 cran (@0.2.0)                   
 backports     1.1.2       2017-12-13 cran (@1.1.2)                   
 bindr         0.1.1       2018-03-13 CRAN (R 3.4.3)                  
 bindrcpp      0.2.2       2018-03-29 CRAN (R 3.4.3)                  
 checkmate     1.8.6       2018-04-10 Github (mllg/checkmate@489319a) 
 clisymbols    1.2.0       2017-05-21 CRAN (R 3.4.3)                  
 colorspace    1.3-2       2016-12-14 CRAN (R 3.4.3)                  
 commonmark    1.5         2018-04-28 CRAN (R 3.4.4)                  
 crayon        1.3.4       2017-09-16 CRAN (R 3.4.3)                  
 curl          3.2         2018-03-28 CRAN (R 3.4.4)                  
 desc          1.2.0       2018-05-01 CRAN (R 3.4.4)                  
 devtools      1.13.6      2018-06-27 CRAN (R 3.4.4)                  
 digest        0.6.15      2018-01-28 CRAN (R 3.4.3)                  
 dplyr         0.7.6       2018-06-29 CRAN (R 3.4.4)                  
 evaluate      0.10.1      2017-06-24 CRAN (R 3.4.3)                  
 fs            1.2.3       2018-06-08 CRAN (R 3.4.4)                  
 glue          1.2.0       2017-10-29 cran (@1.2.0)                   
 highr         0.7         2018-06-09 CRAN (R 3.4.4)                  
 hms           0.4.2.9000  2018-05-26 Github (tidyverse/hms@14e74ab)  
 htmltools     0.3.6       2017-04-28 CRAN (R 3.4.3)                  
 httr          1.3.1       2017-08-20 CRAN (R 3.4.3)                  
 kableExtra    0.9.0       2018-05-21 CRAN (R 3.4.4)                  
 knitr       * 1.20        2018-02-20 CRAN (R 3.4.3)                  
 magrittr    * 1.5         2014-11-22 cran (@1.5)                     
 MASS          7.3-50      2018-04-30 CRAN (R 3.4.4)                  
 memoise       1.1.0       2017-04-21 CRAN (R 3.4.3)                  
 munsell       0.5.0       2018-06-12 CRAN (R 3.4.4)                  
 pillar        1.2.3       2018-05-25 CRAN (R 3.4.4)                  
 pkgconfig     2.0.1       2017-03-21 cran (@2.0.1)                   
 pkgdown       1.1.0       2018-06-02 CRAN (R 3.4.4)                  
 plyr          1.8.4       2016-06-08 CRAN (R 3.4.3)                  
 purrr         0.2.5       2018-05-29 CRAN (R 3.4.4)                  
 R6            2.2.2       2017-06-17 CRAN (R 3.4.3)                  
 Rcpp          0.12.17     2018-05-18 CRAN (R 3.4.4)                  
 readr         1.2.0       2018-05-26 Github (tidyverse/readr@d6d622b)
 REDCapR     * 0.9.10.9001 2018-07-11 local                           
 rlang         0.2.1       2018-05-30 CRAN (R 3.4.4)                  
 rmarkdown     1.10        2018-06-11 CRAN (R 3.4.4)                  
 roxygen2      6.0.1       2017-02-06 CRAN (R 3.4.4)                  
 rprojroot     1.3-2       2018-01-03 CRAN (R 3.4.3)                  
 rstudioapi    0.7         2017-09-07 CRAN (R 3.4.3)                  
 rvest         0.3.2       2016-06-17 CRAN (R 3.4.3)                  
 scales        0.5.0.9000  2018-03-29 Github (hadley/scales@d767915)  
 sessioninfo   1.0.0       2017-06-21 CRAN (R 3.4.3)                  
 stringi       1.2.3       2018-06-12 CRAN (R 3.4.4)                  
 stringr       1.3.1       2018-05-10 CRAN (R 3.4.4)                  
 tibble        1.4.2       2018-01-22 CRAN (R 3.4.3)                  
 tidyselect    0.2.4       2018-02-26 CRAN (R 3.4.3)                  
 viridisLite   0.3.0       2018-02-01 CRAN (R 3.4.3)                  
 withr         2.1.2       2018-03-29 Github (jimhester/withr@79d7b0d)
 xml2          1.2.0       2018-01-24 CRAN (R 3.4.3)                  
 yaml          2.1.19      2018-05-01 CRAN (R 3.4.4)                  </code></pre>
<p></p>
<p>Report rendered by wibeasley at 2018-07-11, 22:44 -0500 in 15 seconds.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#reading-redcap-data">Reading REDCap Data</a></li>
      <li><a href="#session-information">Session Information</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Will Beasley.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script>
  docsearch({
    
    
    apiKey: 'd672935e2d904316d6ee40239317764e',
    indexName: 'redcapr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
