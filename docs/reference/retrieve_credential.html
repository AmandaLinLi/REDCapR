<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Read a token and other credentials from a (non-REDCap)
database or file — retrieve_credential • REDCapR</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Read a token and other credentials from a (non-REDCap)
database or file — retrieve_credential" />
<meta property="og:description" content="These functions are not essential to calling the REDCap API,
but instead are functions that help manage tokens securely." />
<meta property="og:image" content="https://ouhscbbmc.github.io/REDCapR/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">REDCapR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.11.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/OuhscBbmc/REDCapR/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Read a token and other credentials from a (non-REDCap)
database or file</h1>
    <small class="dont-index">Source: <a href='https://github.com/OuhscBbmc/REDCapR/blob/master/R/retrieve-credential.R'><code>R/retrieve-credential.R</code></a></small>
    <div class="hidden name"><code>retrieve_credential.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>These functions are not essential to calling the REDCap API,
but instead are functions that help manage tokens securely.</p>
    </div>

    <pre class="usage"><span class='fu'>retrieve_credential_local</span><span class='op'>(</span>
  <span class='va'>path_credential</span>,
  <span class='va'>project_id</span>,
  check_url            <span class='op'>=</span> <span class='cn'>TRUE</span>,
  check_username       <span class='op'>=</span> <span class='cn'>FALSE</span>,
  check_token_pattern  <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span>
<span class='fu'>retrieve_credential_mssql</span><span class='op'>(</span>
  <span class='va'>project_id</span>,
  <span class='va'>instance</span>,
  <span class='va'>dsn</span>,
  channel    <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>path_credential</th>
      <td><p>The file path to the CSV containing the credentials.
Required.</p></td>
    </tr>
    <tr>
      <th>project_id</th>
      <td><p>The ID assigned to the project withing REDCap.  This
allows the user to store tokens to multiple REDCap projects in one file.
Required</p></td>
    </tr>
    <tr>
      <th>check_url</th>
      <td><p>A <code>logical</code> value indicates if the url in the credential
file should be checked to have approximately the correct form.  Defaults
to TRUE.</p></td>
    </tr>
    <tr>
      <th>check_username</th>
      <td><p>A <code>logical</code> value indicates if the username in the
credential file should be checked against the username returned by R.
Defaults to FALSE.</p></td>
    </tr>
    <tr>
      <th>check_token_pattern</th>
      <td><p>A <code>logical</code> value indicates if the token in the
credential file is a 32-character hexadecimal string.  Defaults to FALSE.</p></td>
    </tr>
    <tr>
      <th>instance</th>
      <td><p>The casual name associated with the REDCap instance on
campus.  This allows one credential system to accommodate multiple
instances on campus.  Required</p></td>
    </tr>
    <tr>
      <th>dsn</th>
      <td><p>A <a href='http://en.wikipedia.org/wiki/Data_source_name'>DSN</a> on the
local machine that points to the desired MSSQL database. Required.</p></td>
    </tr>
    <tr>
      <th>channel</th>
      <td><p>An <em>optional</em> connection handle as returned by
<code><a href='https://dbi.r-dbi.org/reference/dbConnect.html'>DBI::dbConnect()</a></code>.  See Details below. Optional.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list of the following elements:</p><ul>
<li><p><code>redcap_uri</code>: The URI of the REDCap Server.</p></li>
<li><p><code>username</code>: Username.</p></li>
<li><p><code>project_id</code>: The ID assigned to the project withing REDCap.</p></li>
<li><p><code>token</code>: The token to pass to the REDCap server</p></li>
<li><p><code>comment</code>: An optional string.</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>If the database elements are created with the script provided in package's
'Security Database' vignette, the default values will work.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Although we strongly encourage storing all the tokens on a central server
(<em>e.g.</em>, see the <code>retrieve_credential_mssql()</code> function and the
"SecurityDatabase" vignette), there are times when this approach is not
feasible and the token must be stored locally.  Please contact us
if your institution is using something other than SQL Server, and
would like help adapting this approach to your infrastructure.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Will Beasley</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># ---- Local File Example ----------------------------</span>
<span class='va'>path</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"misc/example.credentials"</span>, package <span class='op'>=</span> <span class='st'>"REDCapR"</span><span class='op'>)</span>
<span class='op'>(</span><span class='va'>p1</span>  <span class='op'>&lt;-</span> <span class='fu'>REDCapR</span><span class='fu'>::</span><span class='fu'>retrieve_credential_local</span><span class='op'>(</span><span class='va'>path</span>, <span class='fl'>153L</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $redcap_uri
#&gt; [1] "https://bbmc.ouhsc.edu/redcap/api/"
#&gt; 
#&gt; $username
#&gt; [1] "myusername"
#&gt; 
#&gt; $project_id
#&gt; [1] 153
#&gt; 
#&gt; $token
#&gt; [1] "9A81268476645C4E5F03428B8AC3AA7B"
#&gt; 
#&gt; $comment
#&gt; [1] "simple static (read-only) test project"
#&gt; </div><div class='input'><span class='op'>(</span><span class='va'>p2</span>  <span class='op'>&lt;-</span> <span class='fu'>REDCapR</span><span class='fu'>::</span><span class='fu'>retrieve_credential_local</span><span class='op'>(</span><span class='va'>path</span>, <span class='fl'>212L</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $redcap_uri
#&gt; [1] "https://bbmc.ouhsc.edu/redcap/api/"
#&gt; 
#&gt; $username
#&gt; [1] "myusername"
#&gt; 
#&gt; $project_id
#&gt; [1] 212
#&gt; 
#&gt; $token
#&gt; [1] "0434F0E9CF53ED0587847AB6E51DE762"
#&gt; 
#&gt; $comment
#&gt; [1] "longitudinal (read-only) ARM test project"
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Will Beasley.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: 'd672935e2d904316d6ee40239317764e',
    indexName: 'redcapr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


